"use strict";Object.defineProperty(exports, "__esModule", {value: true}); function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { newObj[key] = obj[key]; } } } newObj.default = obj; return newObj; } } function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; } function _optionalChain(ops) { let lastAccessLHS = undefined; let value = ops[0]; let i = 1; while (i < ops.length) { const op = ops[i]; const fn = ops[i + 1]; i += 2; if ((op === 'optionalAccess' || op === 'optionalCall') && value == null) { return undefined; } if (op === 'access' || op === 'optionalAccess') { lastAccessLHS = value; value = fn(value); } else if (op === 'call' || op === 'optionalCall') { value = fn((...args) => value.call(lastAccessLHS, ...args)); lastAccessLHS = undefined; } } return value; }var _githubslugger = require('github-slugger'); var _githubslugger2 = _interopRequireDefault(_githubslugger);var _mdastutiltostring = require('mdast-util-to-string');var _unistutilvisit = require('unist-util-visit');var _acorn = require('acorn'); var u = _interopRequireWildcard(_acorn);var _mixme = require('mixme');var E=function({depth_min:t=1,depth_max:n=3,no_annotations:o=!1,no_hash:a=!1,property:r=["toc"],prefix:f=""}={}){let e=new _githubslugger2.default;return typeof r=="string"&&(r=[r]),function(g,O){let l=[];_unistutilvisit.visit.call(void 0, g,"heading",function(s){if(s.depth<t||s.depth>n)return;let c=_mdastutiltostring.toString.call(void 0, s.children);if(!c)return;let i="",m=_optionalChain([s, 'access', _2 => _2.data, 'optionalAccess', _3 => _3.hProperties]);if(!o&&_optionalChain([m, 'optionalAccess', _4 => _4.annotation])){let p=u.parse("("+_optionalChain([m, 'optionalAccess', _5 => _5.annotation])+")",{ecmaVersion:"latest"}).body[0].expression;for(let h of p.properties)h.key.name==="id"&&(i=""+h.value.value)}if(!a&&i===""){let p=/^(.*[^\s])\s+#([\w-_]+\s*)$/.exec(c);p&&([,c,i]=p)}i===""&&(i=e.slug(c)),l.push({title:c,depth:s.depth,anchor:f+i})}),P(O.data,r,l,!1)}},A= exports.default =E,D= exports.get =(t,n,o=!1)=>{for(let a of n)if(Object.prototype.hasOwnProperty.call(t,a))t=t[a];else{if(o)throw Error("REMARK_TABLE_OF_CONTENT: property does not exists in strict mode.");return}return t},P= exports.set =(t,n,o,a=!1)=>{if(t===null||typeof t!="object")throw Error("REMARK_TABLE_OF_CONTENT: argument is not an object.");for(let r=0;r<n.length;r++){let f=r===n.length-1,e=n[r];if(f)Object.prototype.hasOwnProperty.call(t,e)?a&&(t[e]=o):t[e]=o;else if(Object.prototype.hasOwnProperty.call(t,e))if(_mixme.is_object_literal.call(void 0, t[e]))t=t[e];else throw Error("REMARK_TABLE_OF_CONTENT: cannot overwrite parent property.");else t[e]={},t=t[e]}};exports.default = A; exports.get = D; exports.set = P;
